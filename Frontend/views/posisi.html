<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posisi - HR Recruitment System</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%231e3a8a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect width='20' height='14' x='2' y='5' rx='2'/><path d='m9 12 2 2 4-4'/></svg>"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.292.0/dist/umd/lucide.js"></script>
    <style>
      /* Professional Corporate Design */
      .card-sharp {
        border-radius: 0px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .card-hover:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      .btn-sharp {
        border-radius: 0px;
      }

      .input-sharp {
        border-radius: 0px;
      }

      /* Professional Color Scheme */
      :root {
        --primary: #1e3a8a; /* Deep Blue */
        --secondary: #64748b; /* Slate Gray */
        --accent: #0ea5e9; /* Sky Blue */
        --success: #059669; /* Emerald */
        --warning: #d97706; /* Amber */
        --danger: #dc2626; /* Red */
        --dark: #0f172a; /* Slate 900 */
        --light: #f8fafc; /* Slate 50 */
      }

      .bg-primary {
        background-color: var(--primary);
      }
      .bg-secondary {
        background-color: var(--secondary);
      }
      .bg-accent {
        background-color: var(--accent);
      }
      .text-primary {
        color: var(--primary);
      }
      .text-secondary {
        color: var(--secondary);
      }
      .border-primary {
        border-color: var(--primary);
      }

      /* Remove all rounded corners */
      * {
        border-radius: 0 !important;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--secondary);
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--primary);
      }

      .transition-all {
        transition: all 0.2s ease-in-out;
      }

      /* Login Form Styles */
      .login-container {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        min-height: 100vh;
      }

      .job-card {
        transition: all 0.2s ease-in-out;
      }

      .job-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      }

      .position-status {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        font-size: 0.875rem;
        font-weight: 500;
      }

      .status-active {
        background-color: #dcfce7;
        color: #166534;
      }
      .status-paused {
        background-color: #fef3c7;
        color: #92400e;
      }
      .status-closed {
        background-color: #fee2e2;
        color: #991b1b;
      }

      .priority-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        font-size: 0.75rem;
        font-weight: 600;
        color: white;
      }

      .priority-high {
        background-color: #dc2626;
      }
      .priority-medium {
        background-color: #ea580c;
      }
      .priority-low {
        background-color: #16a34a;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-inter">
    <!-- Login Modal (Initially Hidden) -->
    <div
      id="loginModal"
      class="fixed inset-0 z-50 login-container flex items-center justify-center"
    >
      <div class="bg-white p-10 w-full max-w-lg mx-4 shadow-2xl border">
        <div class="text-center mb-10">
          <div
            class="mx-auto w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center mb-6"
          >
            <i data-lucide="shield-check" class="w-10 h-10 text-white"></i>
          </div>
          <h2 class="text-3xl font-bold text-gray-900 mb-2">
            HR Recruitment System
          </h2>
          <p class="text-gray-600 text-lg">Login untuk Akses Dashboard</p>
        </div>

        <form id="loginForm" class="space-y-6">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Email HR</label
            >
            <input
              type="email"
              id="email"
              class="w-full px-4 py-4 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"
              placeholder="hr@company.com"
              autocomplete="email"
              required
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Password</label
            >
            <input
              type="password"
              id="password"
              class="w-full px-4 py-4 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              autocomplete="current-password"
              required
            />
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input type="checkbox" id="remember" class="mr-3 w-4 h-4" />
              <label for="remember" class="text-sm text-gray-600"
                >Ingat saya</label
              >
            </div>
            <a
              href="#"
              class="text-sm text-blue-600 hover:text-blue-800 font-medium"
              >Lupa password?</a
            >
          </div>

          <button
            type="submit"
            class="w-full bg-gradient-to-r from-blue-600 to-purple-700 hover:from-blue-700 hover:to-purple-800 text-white py-4 px-6 font-semibold transition-all transform hover:scale-[1.02]"
          >
            Login ke Dashboard
          </button>

          <div class="text-center">
            <p class="text-sm text-gray-500">
              Demo: hr@company.com / password123
            </p>
          </div>
        </form>
      </div>
    </div>

    <!-- Main Application (Initially Hidden) -->
    <div id="mainApp" class="hidden">
      <!-- Modern Sidebar Layout -->
      <div class="flex h-screen bg-gray-50">
        <!-- Sidebar -->
        <div
          class="hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 z-50"
        >
          <div
            class="flex-1 flex flex-col min-h-0 bg-white border-r border-gray-200"
          >
            <!-- Logo -->
            <div class="flex-1 flex flex-col pt-5 pb-4 overflow-y-auto">
              <div class="flex items-center flex-shrink-0 px-6">
                <div
                  class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <i data-lucide="briefcase" class="w-5 h-5 text-white"></i>
                </div>
                <div class="ml-3">
                  <h1 class="text-lg font-bold text-gray-900">HR System</h1>
                  <p class="text-xs text-gray-500">Posisi</p>
                </div>
              </div>

              <!-- Navigation -->
              <nav class="mt-8 flex-1 px-4 space-y-1">
                <a
                  href="dashboard.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="home"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Dashboard
                </a>
                <a
                  href="kandidat.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="users"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Kandidat
                </a>
                <a
                  href="posisi.html"
                  class="sidebar-item active bg-blue-50 border-r-2 border-blue-600 text-blue-700 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="briefcase"
                    class="text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Posisi
                </a>
                <a
                  href="test-management.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-text"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Test Management
                </a>
                <a
                  href="analytics.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="bar-chart-3"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Analytics
                </a>
                <a
                  href="laporan.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-bar-chart"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Laporan
                </a>
                <a
                  href="form-apply.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-plus"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Form Apply
                </a>
                <a
                  href="/admin/tests"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="settings"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Admin Tes
                </a>
              </nav>
            </div>

            <!-- User Profile -->
            <div class="flex-shrink-0 flex border-t border-gray-200 p-4">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <span
                    class="text-white text-sm font-semibold"
                    id="sidebarUserInitial"
                    >H</span
                  >
                </div>
                <div class="ml-3">
                  <p
                    class="text-sm font-medium text-gray-700"
                    id="sidebarUserName"
                  >
                    HR Manager
                  </p>
                  <p class="text-xs text-gray-500" id="sidebarUserEmail">
                    hr@company.com
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile sidebar -->
        <div
          id="mobileSidebar"
          class="lg:hidden fixed inset-0 flex z-40 hidden"
        >
          <div
            class="fixed inset-0 bg-gray-600 bg-opacity-75"
            onclick="toggleMobileSidebar()"
          ></div>
          <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white">
            <div class="absolute top-0 right-0 -mr-12 pt-2">
              <button
                type="button"
                onclick="toggleMobileSidebar()"
                title="Tutup menu"
                class="ml-1 flex items-center justify-center h-10 w-10 text-white"
              >
                <i data-lucide="x" class="h-6 w-6"></i>
              </button>
            </div>
            <!-- Mobile sidebar content same as desktop -->
            <div class="flex-1 h-0 pt-5 pb-4 overflow-y-auto">
              <div class="flex-shrink-0 flex items-center px-4">
                <div
                  class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <i data-lucide="briefcase" class="w-5 h-5 text-white"></i>
                </div>
                <h1 class="ml-3 text-lg font-bold text-gray-900">HR System</h1>
              </div>
              <nav class="mt-5 px-2 space-y-1">
                <a
                  href="dashboard.html"
                  class="mobile-sidebar-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i data-lucide="home" class="text-gray-400 mr-4 h-6 w-6"></i>
                  Dashboard
                </a>
                <a
                  href="kandidat.html"
                  class="mobile-sidebar-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i data-lucide="users" class="text-gray-400 mr-4 h-6 w-6"></i>
                  Kandidat
                </a>
                <a
                  href="posisi.html"
                  class="mobile-sidebar-item active bg-blue-100 text-blue-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i
                    data-lucide="briefcase"
                    class="text-blue-500 mr-4 h-6 w-6"
                  ></i>
                  Posisi
                </a>
              </nav>
            </div>
          </div>
        </div>

        <!-- Main Content Area -->
        <div class="lg:pl-64 flex flex-col flex-1">
          <!-- Top Header -->
          <div
            class="sticky top-0 z-10 lg:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50"
          >
            <button
              type="button"
              onclick="toggleMobileSidebar()"
              title="Buka menu"
              class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center text-gray-500 hover:text-gray-900 focus:outline-none"
            >
              <i data-lucide="menu" class="h-6 w-6"></i>
            </button>
          </div>

          <!-- Header with notifications -->
          <header
            class="bg-white shadow-sm border-b border-gray-200 lg:border-l-0"
          >
            <div class="px-4 sm:px-6 lg:px-8">
              <div class="flex justify-between items-center h-16">
                <div class="flex-1">
                  <h1 class="text-2xl font-bold text-gray-900" id="pageTitle">
                    Manajemen Posisi
                  </h1>
                  <p class="text-sm text-gray-600" id="pageSubtitle">
                    Kelola posisi pekerjaan dan lowongan aktif
                  </p>
                </div>

                <!-- Right side actions -->
                <div class="flex items-center space-x-4">
                  <!-- Search -->
                  <div class="hidden md:block">
                    <div class="relative">
                      <input
                        type="text"
                        id="searchInput"
                        placeholder="Cari posisi..."
                        class="w-64 pl-10 pr-4 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                      />
                      <i
                        data-lucide="search"
                        class="w-4 h-4 absolute left-3 top-3 text-gray-400"
                      ></i>
                    </div>
                  </div>

                  <!-- Add New Position -->
                  <button
                    type="button"
                    onclick="addNewPosition()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 font-medium transition-colors flex items-center"
                  >
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                    Tambah Posisi
                  </button>

                  <!-- Refresh Button -->
                  <button
                    type="button"
                    onclick="refreshPositions()"
                    title="Refresh daftar posisi"
                    class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors"
                  >
                    <i data-lucide="refresh-cw" class="w-5 h-5"></i>
                  </button>

                  <!-- Notifications -->
                  <button
                    class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors relative"
                  >
                    <i data-lucide="bell" class="w-5 h-5"></i>
                    <span
                      id="notificationCount"
                      class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs flex items-center justify-center font-bold rounded-full"
                      >0</span
                    >
                  </button>

                  <!-- User Menu -->
                  <div class="relative">
                    <button
                      onclick="toggleUserMenu()"
                      class="flex items-center space-x-3 p-2 text-sm rounded-lg hover:bg-gray-100 transition-colors"
                    >
                      <div
                        class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                      >
                        <span
                          class="text-white text-sm font-semibold"
                          id="headerUserInitial"
                          >H</span
                        >
                      </div>
                      <div class="hidden sm:block text-left">
                        <div
                          class="font-medium text-gray-700"
                          id="headerUserName"
                        >
                          HR Manager
                        </div>
                        <div class="text-xs text-gray-500" id="headerUserEmail">
                          hr@company.com
                        </div>
                      </div>
                      <i
                        data-lucide="chevron-down"
                        class="w-4 h-4 text-gray-400"
                      ></i>
                    </button>

                    <!-- Dropdown menu -->
                    <div
                      id="userMenu"
                      class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20"
                    >
                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        >Profile</a
                      >
                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        >Settings</a
                      >
                      <div class="border-t border-gray-200"></div>
                      <button
                        onclick="logout()"
                        class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                      >
                        Logout
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>

          <!-- Main Content -->
          <main class="flex-1 overflow-y-auto">
            <div class="px-4 sm:px-6 lg:px-8 py-8">
              <!-- Stats Section -->
              <div class="mb-8">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                  <!-- Total Posisi -->
                  <div class="bg-white p-6 shadow border border-gray-200">
                    <div class="flex items-center">
                      <div
                        class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="briefcase"
                          class="w-5 h-5 text-white"
                        ></i>
                      </div>
                      <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">
                          Total Posisi
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="totalPositionsCount"
                        >
                          0
                        </p>
                      </div>
                    </div>
                  </div>

                  <!-- Posisi Aktif -->
                  <div class="bg-white p-6 shadow border border-gray-200">
                    <div class="flex items-center">
                      <div
                        class="w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="play-circle"
                          class="w-5 h-5 text-white"
                        ></i>
                      </div>
                      <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">
                          Posisi Aktif
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="activePositionsCount"
                        >
                          0
                        </p>
                      </div>
                    </div>
                  </div>

                  <!-- Total Aplikasi -->
                  <div class="bg-white p-6 shadow border border-gray-200">
                    <div class="flex items-center">
                      <div
                        class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center"
                      >
                        <i data-lucide="users" class="w-5 h-5 text-white"></i>
                      </div>
                      <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">
                          Total Aplikasi
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="totalApplicationsCount"
                        >
                          0
                        </p>
                      </div>
                    </div>
                  </div>

                  <!-- Urgent Positions -->
                  <div class="bg-white p-6 shadow border border-gray-200">
                    <div class="flex items-center">
                      <div
                        class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="alert-circle"
                          class="w-5 h-5 text-white"
                        ></i>
                      </div>
                      <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Urgent</p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="urgentPositionsCount"
                        >
                          0
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Filter Options -->
                <div class="bg-white p-6 shadow border border-gray-200">
                  <div class="flex flex-wrap items-center gap-4">
                    <div class="flex items-center">
                      <label class="text-sm font-medium text-gray-700 mr-2"
                        >Status:</label
                      >
                      <select
                        id="statusFilter"
                        title="Filter berdasarkan status"
                        class="border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                      >
                        <option value="">Semua Status</option>
                        <option value="active">Active</option>
                        <option value="paused">Paused</option>
                        <option value="closed">Closed</option>
                      </select>
                    </div>

                    <div class="flex items-center">
                      <label class="text-sm font-medium text-gray-700 mr-2"
                        >Departemen:</label
                      >
                      <select
                        id="departmentFilter"
                        title="Filter berdasarkan departemen"
                        class="border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                      >
                        <option value="">Semua Departemen</option>
                        <option value="engineering">Engineering</option>
                        <option value="marketing">Marketing</option>
                        <option value="sales">Sales</option>
                        <option value="finance">Finance</option>
                      </select>
                    </div>

                    <div class="flex items-center">
                      <label class="text-sm font-medium text-gray-700 mr-2"
                        >Prioritas:</label
                      >
                      <select
                        id="priorityFilter"
                        title="Filter berdasarkan prioritas"
                        class="border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                      >
                        <option value="">Semua Prioritas</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                      </select>
                    </div>

                    <button
                      onclick="clearFilters()"
                      class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 font-medium transition-colors"
                    >
                      Clear Filters
                    </button>
                  </div>
                </div>
              </div>

              <!-- Positions Grid -->
              <div
                id="positionsGrid"
                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"
              >
                <!-- Loading state -->
                <div
                  class="col-span-full flex items-center justify-center py-12"
                >
                  <div class="text-center text-gray-500">
                    <i
                      data-lucide="loader-2"
                      class="w-8 h-8 animate-spin mx-auto mb-4"
                    ></i>
                    <p class="text-lg font-medium">Loading positions...</p>
                  </div>
                </div>
              </div>

              <!-- Add Position Modal -->
              <div
                id="addPositionModal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50"
              >
                <div class="flex items-center justify-center min-h-screen p-4">
                  <div class="bg-white max-w-md w-full shadow-lg">
                    <div class="p-6 border-b border-gray-200">
                      <h3 class="text-lg font-semibold text-gray-900">
                        Tambah Posisi Baru
                      </h3>
                    </div>
                    <form id="addPositionForm" class="p-6 space-y-4">
                      <div>
                        <label
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Judul Posisi *</label
                        >
                        <input
                          type="text"
                          id="newTitle"
                          required
                          placeholder="Masukkan judul posisi"
                          class="w-full px-3 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none"
                        />
                      </div>
                      <div>
                        <label
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Departemen *</label
                        >
                        <input
                          type="text"
                          id="newDepartment"
                          required
                          placeholder="Masukkan departemen"
                          class="w-full px-3 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none"
                        />
                      </div>
                      <div>
                        <label
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Lokasi *</label
                        >
                        <input
                          type="text"
                          id="newLocation"
                          required
                          placeholder="Masukkan lokasi"
                          class="w-full px-3 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none"
                        />
                      </div>
                      <div>
                        <label
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Deskripsi *</label
                        >
                        <textarea
                          id="newDescription"
                          required
                          rows="3"
                          placeholder="Masukkan deskripsi posisi"
                          class="w-full px-3 py-2 border border-gray-300 focus:border-blue-500 focus:outline-none"
                        ></textarea>
                      </div>
                      <div class="flex justify-end space-x-3 pt-4">
                        <button
                          type="button"
                          onclick="closeAddPositionModal()"
                          class="px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-50"
                        >
                          Batal
                        </button>
                        <button
                          type="submit"
                          class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white"
                        >
                          Simpan
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Pagination -->
              <div
                class="mt-8 flex items-center justify-between bg-white p-6 shadow border border-gray-200"
              >
                <div class="text-sm text-gray-700">
                  Showing <span id="showingFrom">1</span> to
                  <span id="showingTo">6</span> of
                  <span id="totalEntries">0</span> positions
                </div>
                <div class="flex space-x-2">
                  <button
                    onclick="previousPage()"
                    class="px-3 py-2 border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors"
                  >
                    Previous
                  </button>
                  <button
                    class="px-3 py-2 border border-blue-500 bg-blue-500 text-white"
                  >
                    1
                  </button>
                  <button
                    onclick="nextPage()"
                    class="px-3 py-2 border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors"
                  >
                    Next
                  </button>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>

    <script>
      const API_BASE = "http://localhost:3011/api";
      // Initialize user from localStorage
      let currentUser = localStorage.getItem("hr_user")
        ? JSON.parse(localStorage.getItem("hr_user"))
        : null;
      let positionsData = [];
      let currentPage = 1;
      let itemsPerPage = 6;

      // Initialize Lucide icons
      lucide.createIcons();

      // Sidebar Navigation Functions
      function toggleMobileSidebar() {
        const sidebar = document.getElementById("mobileSidebar");
        sidebar.classList.toggle("hidden");
      }

      function toggleUserMenu() {
        const userMenu = document.getElementById("userMenu");
        userMenu.classList.toggle("hidden");
      }

      // Close user menu when clicking outside
      document.addEventListener("click", function (event) {
        const userMenu = document.getElementById("userMenu");
        const userButton = event.target.closest('[onclick="toggleUserMenu()"]');

        if (!userButton && !userMenu.contains(event.target)) {
          userMenu.classList.add("hidden");
        }
      });

      // Load positions data
      // Dummy positions data (tanpa backend API)
      const dummyPositions = [
        {
          id: "job-001",
          title: "Senior Backend Developer",
          department: "Engineering",
          location: "Jakarta",
          description:
            "Develop scalable backend systems using Node.js, Python, dan databases modern",
          status: "active",
          priority: "high",
          openings: 3,
          applicants: 12,
          postedDate: "2024-01-15",
          salary_range: { min: 8000000, max: 15000000 },
          requirements: [
            "Node.js",
            "PostgreSQL",
            "Redis",
            "5+ years experience",
          ],
          benefits: [
            "Health Insurance",
            "Work from Home",
            "Professional Development",
          ],
        },
        {
          id: "job-002",
          title: "Frontend Engineer React",
          department: "Engineering",
          location: "Jakarta",
          description:
            "Build interactive UI components dengan React, TypeScript, dan modern CSS frameworks",
          status: "active",
          priority: "high",
          openings: 2,
          applicants: 8,
          postedDate: "2024-01-20",
          salary_range: { min: 7000000, max: 12000000 },
          requirements: [
            "React",
            "TypeScript",
            "Tailwind CSS",
            "3+ years experience",
          ],
          benefits: ["Health Insurance", "Flexible Hours", "Learning Budget"],
        },
        {
          id: "job-003",
          title: "HR Manager",
          department: "Human Resources",
          location: "Jakarta",
          description:
            "Mengelola rekrutmen, development, dan employee relations untuk tim 50+ orang",
          status: "active",
          priority: "medium",
          openings: 1,
          applicants: 5,
          postedDate: "2024-01-25",
          salary_range: { min: 8000000, max: 13000000 },
          requirements: [
            "HR Management",
            "Recruitment",
            "Employee Relations",
            "Minimal 5 tahun",
          ],
          benefits: [
            "Health Insurance",
            "Bonus Performance",
            "Career Development",
          ],
        },
        {
          id: "job-004",
          title: "Product Manager",
          department: "Product",
          location: "Jakarta",
          description:
            "Lead product strategy dan development untuk platform SaaS kami yang berkembang pesat",
          status: "active",
          priority: "high",
          openings: 1,
          applicants: 6,
          postedDate: "2024-02-01",
          salary_range: { min: 10000000, max: 18000000 },
          requirements: [
            "Product Strategy",
            "Data Analytics",
            "Agile",
            "4+ years experience",
          ],
          benefits: ["Health Insurance", "Stock Options", "Remote Work"],
        },
        {
          id: "job-005",
          title: "QA Automation Engineer",
          department: "Quality Assurance",
          location: "Jakarta",
          description:
            "Develop automated test frameworks dan ensure product quality di semua platform",
          status: "active",
          priority: "medium",
          openings: 2,
          applicants: 4,
          postedDate: "2024-02-05",
          salary_range: { min: 6000000, max: 10000000 },
          requirements: [
            "Selenium",
            "Python/JavaScript",
            "Test Automation",
            "2+ years experience",
          ],
          benefits: [
            "Health Insurance",
            "Professional Development",
            "Performance Bonus",
          ],
        },
        {
          id: "job-006",
          title: "Data Analyst",
          department: "Data & Analytics",
          location: "Jakarta",
          description:
            "Analyze data trends dan provide insights untuk business decision making",
          status: "paused",
          priority: "low",
          openings: 1,
          applicants: 3,
          postedDate: "2024-02-10",
          salary_range: { min: 6500000, max: 11000000 },
          requirements: [
            "SQL",
            "Python/R",
            "Tableau/Power BI",
            "3+ years experience",
          ],
          benefits: ["Health Insurance", "Learning Stipend", "Remote Work"],
        },
      ];

      async function loadPositionsData() {
        try {
          console.log("‚úÖ Loading positions data (dummy - tanpa backend)...");

          // Simulasi delay loading
          await new Promise((resolve) => setTimeout(resolve, 300));

          // Gunakan dummy data lokal
          positionsData = [...dummyPositions];

          // Update UI dengan data
          updatePositionsUI();
          updateStats();

          console.log(
            "‚úÖ Positions loaded dengan dummy data:",
            positionsData.length,
            "positions"
          );
        } catch (error) {
          console.error("Error loading positions data:", error);
          // Fallback dengan dummy data
          positionsData = [...dummyPositions];
          updatePositionsUI();
          updateStats();
          console.log("üì¶ Using fallback positions data");
        }
      }

      // Update positions grid UI
      function updatePositionsUI() {
        const grid = document.getElementById("positionsGrid");

        if (positionsData.length === 0) {
          grid.innerHTML = `
                    <div class="col-span-full flex items-center justify-center py-12">
                        <div class="text-center text-gray-500">
                            <i data-lucide="briefcase" class="w-12 h-12 mx-auto mb-4 text-gray-300"></i>
                            <p class="text-lg font-medium">No positions found</p>
                            <p class="text-sm">Start by adding your first job position.</p>
                        </div>
                    </div>
                `;
          lucide.createIcons();
          return;
        }

        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const pageData = positionsData.slice(startIndex, endIndex);

        grid.innerHTML = pageData
          .map(
            (position) => `
                <div class="job-card bg-white shadow border border-gray-200 p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${
                              position.title
                            }</h3>
                            <div class="flex items-center text-sm text-gray-500 mb-2">
                                <i data-lucide="building" class="w-4 h-4 mr-1"></i>
                                <span>${position.department}</span>
                                <span class="mx-2">‚Ä¢</span>
                                <i data-lucide="map-pin" class="w-4 h-4 mr-1"></i>
                                <span>${position.location}</span>
                            </div>
                        </div>
                        <div class="flex flex-col items-end space-y-2">
                            <span class="position-status status-${
                              position.status
                            }">
                                ${
                                  position.status.charAt(0).toUpperCase() +
                                  position.status.slice(1)
                                }
                            </span>
                            <span class="priority-badge priority-${
                              position.priority
                            }">
                                ${position.priority.toUpperCase()}
                            </span>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 mb-4">${
                      position.description
                    }</p>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                        <div>
                            <span class="text-gray-500">Aplikasi:</span>
                            <span class="font-medium text-gray-900">${
                              position.applications
                            }</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Tipe:</span>
                            <span class="font-medium text-gray-900">${
                              position.type
                            }</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Deadline:</span>
                            <span class="font-medium text-gray-900">${
                              position.deadline
                            }</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Posted:</span>
                            <span class="font-medium text-gray-900">${
                              position.posted
                            }</span>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <p class="text-sm text-gray-500">Salary Range:</p>
                        <p class="font-medium text-gray-900">${
                          position.salary
                        }</p>
                    </div>
                    
                    <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                        <div class="flex space-x-2">
                            <button onclick="viewPosition(${
                              position.id
                            })" class="text-blue-600 hover:text-blue-800 p-1">
                                <i data-lucide="eye" class="w-4 h-4"></i>
                            </button>
                            <button onclick="editPosition(${
                              position.id
                            })" class="text-green-600 hover:text-green-800 p-1">
                                <i data-lucide="edit" class="w-4 h-4"></i>
                            </button>
                            <button onclick="clonePosition(${
                              position.id
                            })" class="text-purple-600 hover:text-purple-800 p-1">
                                <i data-lucide="copy" class="w-4 h-4"></i>
                            </button>
                            <button onclick="deletePosition(${
                              position.id
                            })" class="text-red-600 hover:text-red-800 p-1">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button onclick="applyForPosition(${
                              position.id
                            })" class="bg-primary hover:bg-blue-700 text-white px-3 py-1 text-sm font-medium transition-colors">
                                Apply Now
                            </button>
                            <button onclick="viewApplicants(${
                              position.id
                            })" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 text-sm font-medium transition-colors">
                                View Applicants
                            </button>
                            ${
                              position.status === "active"
                                ? `<button onclick="pausePosition(${position.id})" class="bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 text-sm font-medium transition-colors">
                                    Pause
                                </button>`
                                : `<button onclick="activatePosition(${position.id})" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 text-sm font-medium transition-colors">
                                    Activate
                                </button>`
                            }
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        // Update pagination info
        document.getElementById("showingFrom").textContent = startIndex + 1;
        document.getElementById("showingTo").textContent = Math.min(
          endIndex,
          positionsData.length
        );
        document.getElementById("totalEntries").textContent =
          positionsData.length;

        lucide.createIcons();
      }

      // Update statistics
      function updateStats() {
        const totalPositions = positionsData.length;
        const activePositions = positionsData.filter(
          (p) => p.status === "active"
        ).length;
        const totalApplications = positionsData.reduce(
          (sum, p) => sum + p.applications,
          0
        );
        const urgentPositions = positionsData.filter(
          (p) => p.priority === "high"
        ).length;

        document.getElementById("totalPositionsCount").textContent =
          totalPositions;
        document.getElementById("activePositionsCount").textContent =
          activePositions;
        document.getElementById("totalApplicationsCount").textContent =
          totalApplications;
        document.getElementById("urgentPositionsCount").textContent =
          urgentPositions;

        // Update notification count
        document.getElementById("notificationCount").textContent =
          urgentPositions;
        document.getElementById("notificationCount").style.display =
          urgentPositions > 0 ? "flex" : "none";
      }

      // Show error state
      function showErrorState() {
        const grid = document.getElementById("positionsGrid");
        grid.innerHTML = `
                <div class="col-span-full flex items-center justify-center py-12">
                    <div class="text-center text-red-500">
                        <i data-lucide="alert-circle" class="w-12 h-12 mx-auto mb-4"></i>
                        <p class="text-lg font-medium">Error loading positions</p>
                        <p class="text-sm">Please try refreshing the page.</p>
                    </div>
                </div>
            `;
        lucide.createIcons();
      }

      // Action functions
      function addNewPosition() {
        document.getElementById("addPositionModal").classList.remove("hidden");
      }

      function closeAddPositionModal() {
        document.getElementById("addPositionModal").classList.add("hidden");
        document.getElementById("addPositionForm").reset();
      }

      async function handleAddPosition(e) {
        e.preventDefault();

        console.log("üìù Form submitted - handling add position");

        const title = document.getElementById("newTitle").value;
        const department = document.getElementById("newDepartment").value;
        const location = document.getElementById("newLocation").value;
        const description = document.getElementById("newDescription").value;

        console.log("üìã Form data:", {
          title,
          department,
          location,
          description,
        });

        const newPosition = {
          id: Date.now(),
          title: title,
          department: department,
          location: location,
          description: description,
          status: "active",
          priority: "medium",
          openings: 1,
          applicants: 0,
          postedDate: new Date().toISOString().split("T")[0],
        };

        console.log("üöÄ Adding to local array immediately");
        console.log(
          "üì¶ Before add - positionsData length:",
          positionsData.length
        );
        positionsData.push(newPosition);
        console.log(
          "üì¶ After add - positionsData length:",
          positionsData.length
        );
        console.log("üì¶ New position added:", newPosition);
        updatePositionsUI();
        updateStats();
        closeAddPositionModal();
        alert("‚úÖ Posisi ditambahkan ke daftar!");

        console.log("üìä Final positionsData:", positionsData);
      }

      function refreshPositions() {
        console.log("Refreshing positions data...");
        loadPositionsData();
      }

      function viewPosition(id) {
        const position = positionsData.find((p) => p.id === id);
        alert(`View details for: ${position.title}`);
      }

      function editPosition(id) {
        const position = positionsData.find((p) => p.id === id);
        alert(`Edit position: ${position.title}`);
      }

      function clonePosition(id) {
        const position = positionsData.find((p) => p.id === id);
        alert(`Clone position: ${position.title}`);
      }

      async function deletePosition(id) {
        if (confirm("Are you sure you want to delete this position?")) {
          try {
            const response = await fetch(`${API_BASE}/jobs/${id}`, {
              method: "DELETE",
            });

            if (response.ok) {
              loadPositionsData();
              alert("Position deleted successfully!");
            } else {
              throw new Error("Failed to delete");
            }
          } catch (error) {
            console.warn("Delete API failed, fallback to local:", error);
            positionsData = positionsData.filter((p) => p.id !== id);
            updatePositionsUI();
            updateStats();
            alert("Position deleted (local fallback)!");
          }
        }
      }

      function viewApplicants(id) {
        const position = positionsData.find((p) => p.id === id);
        alert(`View applicants for: ${position.title}`);
      }

      async function pausePosition(id) {
        try {
          const response = await fetch(`${API_BASE}/jobs/${id}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ status: "paused" }),
          });

          if (response.ok) {
            loadPositionsData();
            alert("Position paused!");
          } else {
            throw new Error("Failed to pause");
          }
        } catch (error) {
          console.warn("Pause API failed, fallback to local:", error);
          const position = positionsData.find((p) => p.id === id);
          position.status = "paused";
          updatePositionsUI();
          updateStats();
        }
      }

      async function activatePosition(id) {
        try {
          const response = await fetch(`${API_BASE}/jobs/${id}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ status: "active" }),
          });

          if (response.ok) {
            loadPositionsData();
            alert("Position activated!");
          } else {
            throw new Error("Failed to activate");
          }
        } catch (error) {
          console.warn("Activate API failed, fallback to local:", error);
          const position = positionsData.find((p) => p.id === id);
          position.status = "active";
          updatePositionsUI();
          updateStats();
        }
      }

      function applyForPosition(id) {
        window.location.href = `form-apply.html?jobId=${id}`;
      }

      function clearFilters() {
        document.getElementById("statusFilter").value = "";
        document.getElementById("departmentFilter").value = "";
        document.getElementById("priorityFilter").value = "";
        document.getElementById("searchInput").value = "";
        // Reset filters and reload data
        loadPositionsData();
      }

      function previousPage() {
        if (currentPage > 1) {
          currentPage--;
          updatePositionsUI();
        }
      }

      function nextPage() {
        const totalPages = Math.ceil(positionsData.length / itemsPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          updatePositionsUI();
        }
      }

      // Login success handler
      function loginSuccess(userData) {
        currentUser = userData;
        // Save user data to localStorage
        localStorage.setItem("hr_user", JSON.stringify(userData));

        // Update user info in header and sidebar
        updateUserUI(userData);

        // Hide login, show main app
        document.getElementById("loginModal").classList.add("hidden");
        document.getElementById("mainApp").classList.remove("hidden");

        // Load positions data
        loadPositionsData();

        // Add position form handler
        const form = document.getElementById("addPositionForm");
        if (form) {
          form.addEventListener("submit", handleAddPosition);
          console.log("‚úÖ Form event listener attached to:", form);

          // Also add click handler to submit button as backup
          const submitBtn = form.querySelector('button[type="submit"]');
          if (submitBtn) {
            submitBtn.addEventListener("click", (e) => {
              e.preventDefault();
              console.log("üîò Submit button clicked directly");
              handleAddPosition(e);
            });
          }
        } else {
          console.error("‚ùå addPositionForm not found");
        }
      }

      // Update user UI elements
      function updateUserUI(userData) {
        if (document.getElementById("headerUserEmail")) {
          document.getElementById("headerUserEmail").textContent =
            userData.email;
        }
        if (document.getElementById("headerUserName")) {
          document.getElementById("headerUserName").textContent = userData.name;
        }
        if (document.getElementById("headerUserInitial")) {
          document.getElementById("headerUserInitial").textContent =
            userData.name.charAt(0);
        }
        if (document.getElementById("sidebarUserEmail")) {
          document.getElementById("sidebarUserEmail").textContent =
            userData.email;
        }
        if (document.getElementById("sidebarUserName")) {
          document.getElementById("sidebarUserName").textContent =
            userData.name;
        }
        if (document.getElementById("sidebarUserInitial")) {
          document.getElementById("sidebarUserInitial").textContent =
            userData.name.charAt(0);
        }
      }

      // Check authentication state on page load
      function checkAuthState() {
        if (currentUser) {
          // User is already logged in
          document.getElementById("loginModal").classList.add("hidden");
          document.getElementById("mainApp").classList.remove("hidden");
          // Update UI with user info
          updateUserUI(currentUser);
          // Load positions data
          loadPositionsData();
        } else {
          // Show login modal
          document.getElementById("loginModal").classList.remove("hidden");
          document.getElementById("mainApp").classList.add("hidden");
        }
      }

      // Login functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Check if user is already logged in
        checkAuthState();

        // Set up login form
        document
          .getElementById("loginForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            // Demo login validation
            if (email === "hr@company.com" && password === "password123") {
              const userData = {
                email: email,
                name: "HR Manager",
                role: "hr_manager",
              };

              loginSuccess(userData);
            } else {
              alert(
                "Email atau password salah. Gunakan: hr@company.com / password123"
              );
            }
          });
      });

      // Logout functionality
      function logout() {
        currentUser = null;
        // Clear localStorage
        localStorage.removeItem("hr_user");
        document.getElementById("loginModal").classList.remove("hidden");
        document.getElementById("mainApp").classList.add("hidden");
      }
    </script>
  </body>
</html>
