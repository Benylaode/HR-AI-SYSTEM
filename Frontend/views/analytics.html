<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics - HR Recruitment System</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%231e3a8a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect width='20' height='14' x='2' y='5' rx='2'/><path d='m9 12 2 2 4-4'/></svg>"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.292.0/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
      /* Professional Corporate Design */
      .card-sharp {
        border-radius: 0px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .card-hover:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      .btn-sharp {
        border-radius: 0px;
      }

      .input-sharp {
        border-radius: 0px;
      }

      /* Professional Color Scheme */
      :root {
        --primary: #1e3a8a; /* Deep Blue */
        --secondary: #64748b; /* Slate Gray */
        --accent: #0ea5e9; /* Sky Blue */
        --success: #059669; /* Emerald */
        --warning: #d97706; /* Amber */
        --danger: #dc2626; /* Red */
        --dark: #0f172a; /* Slate 900 */
        --light: #f8fafc; /* Slate 50 */
      }

      .bg-primary {
        background-color: var(--primary);
      }
      .bg-secondary {
        background-color: var(--secondary);
      }
      .bg-accent {
        background-color: var(--accent);
      }
      .text-primary {
        color: var(--primary);
      }
      .text-secondary {
        color: var(--secondary);
      }
      .border-primary {
        border-color: var(--primary);
      }

      /* Remove all rounded corners */
      * {
        border-radius: 0 !important;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--secondary);
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--primary);
      }

      .transition-all {
        transition: all 0.2s ease-in-out;
      }

      /* Login Form Styles */
      .login-container {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        min-height: 100vh;
      }

      .chart-container {
        position: relative;
        height: 300px;
      }

      .metric-card {
        transition: all 0.2s ease-in-out;
      }

      .metric-card:hover {
        transform: translateY(-2px);
      }

      .trend-up {
        color: #059669;
      }
      .trend-down {
        color: #dc2626;
      }
      .trend-neutral {
        color: #64748b;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-inter">
    <!-- Login Modal (Initially Hidden) -->
    <div
      id="loginModal"
      class="fixed inset-0 z-50 login-container flex items-center justify-center"
    >
      <div class="bg-white p-10 w-full max-w-lg mx-4 shadow-2xl border">
        <div class="text-center mb-10">
          <div
            class="mx-auto w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center mb-6"
          >
            <i data-lucide="shield-check" class="w-10 h-10 text-white"></i>
          </div>
          <h2 class="text-3xl font-bold text-gray-900 mb-2">
            HR Recruitment System
          </h2>
          <p class="text-gray-600 text-lg">Login untuk Akses Dashboard</p>
        </div>

        <form id="loginForm" class="space-y-6">
          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Email HR</label
            >
            <input
              type="email"
              id="email"
              class="w-full px-4 py-4 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"
              placeholder="hr@company.com"
              autocomplete="email"
              required
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Password</label
            >
            <input
              type="password"
              id="password"
              class="w-full px-4 py-4 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"
              placeholder="••••••••"
              autocomplete="current-password"
              required
            />
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input type="checkbox" id="remember" class="mr-3 w-4 h-4" />
              <label for="remember" class="text-sm text-gray-600"
                >Ingat saya</label
              >
            </div>
            <a
              href="#"
              class="text-sm text-blue-600 hover:text-blue-800 font-medium"
              >Lupa password?</a
            >
          </div>

          <button
            type="submit"
            class="w-full bg-gradient-to-r from-blue-600 to-purple-700 hover:from-blue-700 hover:to-purple-800 text-white py-4 px-6 font-semibold transition-all transform hover:scale-[1.02]"
          >
            Login ke Dashboard
          </button>

          <div class="text-center">
            <p class="text-sm text-gray-500">
              Demo: hr@company.com / password123
            </p>
          </div>
        </form>
      </div>
    </div>

    <!-- Main Application (Initially Hidden) -->
    <div id="mainApp" class="hidden">
      <!-- Modern Sidebar Layout -->
      <div class="flex h-screen bg-gray-50">
        <!-- Sidebar -->
        <div
          class="hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 z-50"
        >
          <div
            class="flex-1 flex flex-col min-h-0 bg-white border-r border-gray-200"
          >
            <!-- Logo -->
            <div class="flex-1 flex flex-col pt-5 pb-4 overflow-y-auto">
              <div class="flex items-center flex-shrink-0 px-6">
                <div
                  class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <i data-lucide="briefcase" class="w-5 h-5 text-white"></i>
                </div>
                <div class="ml-3">
                  <h1 class="text-lg font-bold text-gray-900">HR System</h1>
                  <p class="text-xs text-gray-500">Analytics</p>
                </div>
              </div>

              <!-- Navigation -->
              <nav class="mt-8 flex-1 px-4 space-y-1">
                <a
                  href="dashboard.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="home"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Dashboard
                </a>
                <a
                  href="kandidat.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="users"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Kandidat
                </a>
                <a
                  href="posisi.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="briefcase"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Posisi
                </a>
                <a
                  href="test-management.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-text"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Test Management
                </a>
                <a
                  href="analytics.html"
                  class="sidebar-item active bg-blue-50 border-r-2 border-blue-600 text-blue-700 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="bar-chart-3"
                    class="text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Analytics
                </a>
                <a
                  href="laporan.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-bar-chart"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Laporan
                </a>
                <a
                  href="form-apply.html"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="file-plus"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Form Apply
                </a>
                <a
                  href="/admin/tests"
                  class="sidebar-item text-gray-700 hover:text-blue-700 hover:bg-blue-50 group flex items-center px-3 py-3 text-sm font-medium"
                >
                  <i
                    data-lucide="settings"
                    class="text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5"
                  ></i>
                  Admin Tes
                </a>
              </nav>
            </div>

            <!-- User Profile -->
            <div class="flex-shrink-0 flex border-t border-gray-200 p-4">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <span
                    class="text-white text-sm font-semibold"
                    id="sidebarUserInitial"
                    >H</span
                  >
                </div>
                <div class="ml-3">
                  <p
                    class="text-sm font-medium text-gray-700"
                    id="sidebarUserName"
                  >
                    HR Manager
                  </p>
                  <p class="text-xs text-gray-500" id="sidebarUserEmail">
                    hr@company.com
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile sidebar -->
        <div
          id="mobileSidebar"
          class="lg:hidden fixed inset-0 flex z-40 hidden"
        >
          <div
            class="fixed inset-0 bg-gray-600 bg-opacity-75"
            onclick="toggleMobileSidebar()"
          ></div>
          <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white">
            <div class="absolute top-0 right-0 -mr-12 pt-2">
              <button
                onclick="toggleMobileSidebar()"
                class="ml-1 flex items-center justify-center h-10 w-10 text-white"
              >
                <i data-lucide="x" class="h-6 w-6"></i>
              </button>
            </div>
            <!-- Mobile sidebar content same as desktop -->
            <div class="flex-1 h-0 pt-5 pb-4 overflow-y-auto">
              <div class="flex-shrink-0 flex items-center px-4">
                <div
                  class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                >
                  <i data-lucide="briefcase" class="w-5 h-5 text-white"></i>
                </div>
                <h1 class="ml-3 text-lg font-bold text-gray-900">HR System</h1>
              </div>
              <nav class="mt-5 px-2 space-y-1">
                <a
                  href="dashboard.html"
                  class="mobile-sidebar-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i data-lucide="home" class="text-gray-400 mr-4 h-6 w-6"></i>
                  Dashboard
                </a>
                <a
                  href="kandidat.html"
                  class="mobile-sidebar-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i data-lucide="users" class="text-gray-400 mr-4 h-6 w-6"></i>
                  Kandidat
                </a>
                <a
                  href="posisi.html"
                  class="mobile-sidebar-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i
                    data-lucide="briefcase"
                    class="text-gray-400 mr-4 h-6 w-6"
                  ></i>
                  Posisi
                </a>
                <a
                  href="analytics.html"
                  class="mobile-sidebar-item active bg-blue-100 text-blue-900 group flex items-center px-2 py-2 text-base font-medium"
                >
                  <i
                    data-lucide="bar-chart-3"
                    class="text-blue-500 mr-4 h-6 w-6"
                  ></i>
                  Analytics
                </a>
              </nav>
            </div>
          </div>
        </div>

        <!-- Main Content Area -->
        <div class="lg:pl-64 flex flex-col flex-1">
          <!-- Top Header -->
          <div
            class="sticky top-0 z-10 lg:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50"
          >
            <button
              onclick="toggleMobileSidebar()"
              class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center text-gray-500 hover:text-gray-900 focus:outline-none"
            >
              <i data-lucide="menu" class="h-6 w-6"></i>
            </button>
          </div>

          <!-- Header with notifications -->
          <header
            class="bg-white shadow-sm border-b border-gray-200 lg:border-l-0"
          >
            <div class="px-4 sm:px-6 lg:px-8">
              <div class="flex justify-between items-center h-16">
                <div class="flex-1">
                  <h1 class="text-2xl font-bold text-gray-900" id="pageTitle">
                    Analytics & Insights
                  </h1>
                  <p class="text-sm text-gray-600" id="pageSubtitle">
                    Analisis performa recruitment dan DISC assessment
                  </p>
                </div>

                <!-- Right side actions -->
                <div class="flex items-center space-x-4">
                  <!-- Date Range Picker -->
                  <div class="hidden md:flex items-center space-x-2">
                    <select
                      id="dateRange"
                      class="border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                    >
                      <option value="7d">Last 7 days</option>
                      <option value="30d" selected>Last 30 days</option>
                      <option value="90d">Last 90 days</option>
                      <option value="1y">Last year</option>
                    </select>
                  </div>

                  <!-- Export Report -->
                  <button
                    onclick="exportAnalyticsReport()"
                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 font-medium transition-colors flex items-center"
                  >
                    <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                    Export
                  </button>

                  <!-- Refresh Button -->
                  <button
                    onclick="refreshAnalytics()"
                    class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors"
                  >
                    <i data-lucide="refresh-cw" class="w-5 h-5"></i>
                  </button>

                  <!-- Notifications -->
                  <button
                    class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors relative"
                  >
                    <i data-lucide="bell" class="w-5 h-5"></i>
                    <span
                      id="notificationCount"
                      class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs flex items-center justify-center font-bold rounded-full"
                      >0</span
                    >
                  </button>

                  <!-- User Menu -->
                  <div class="relative">
                    <button
                      onclick="toggleUserMenu()"
                      class="flex items-center space-x-3 p-2 text-sm rounded-lg hover:bg-gray-100 transition-colors"
                    >
                      <div
                        class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
                      >
                        <span
                          class="text-white text-sm font-semibold"
                          id="headerUserInitial"
                          >H</span
                        >
                      </div>
                      <div class="hidden sm:block text-left">
                        <div
                          class="font-medium text-gray-700"
                          id="headerUserName"
                        >
                          HR Manager
                        </div>
                        <div class="text-xs text-gray-500" id="headerUserEmail">
                          hr@company.com
                        </div>
                      </div>
                      <i
                        data-lucide="chevron-down"
                        class="w-4 h-4 text-gray-400"
                      ></i>
                    </button>

                    <!-- Dropdown menu -->
                    <div
                      id="userMenu"
                      class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20"
                    >
                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        >Profile</a
                      >
                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        >Settings</a
                      >
                      <div class="border-t border-gray-200"></div>
                      <button
                        onclick="logout()"
                        class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                      >
                        Logout
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>

          <!-- Main Content -->
          <main class="flex-1 overflow-y-auto">
            <div class="px-4 sm:px-6 lg:px-8 py-8">
              <!-- Key Metrics Grid -->
              <div class="mb-8">
                <div
                  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"
                >
                  <!-- Conversion Rate -->
                  <div
                    class="metric-card bg-white p-6 shadow border border-gray-200"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-sm font-medium text-gray-500">
                          Conversion Rate
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="conversionRate"
                        >
                          0%
                        </p>
                        <div class="flex items-center mt-2">
                          <span
                            class="trend-up text-sm font-medium"
                            id="conversionTrend"
                            >+5.2%</span
                          >
                          <span class="text-xs text-gray-500 ml-2"
                            >vs last month</span
                          >
                        </div>
                      </div>
                      <div
                        class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="trending-up"
                          class="w-6 h-6 text-white"
                        ></i>
                      </div>
                    </div>
                  </div>

                  <!-- Avg Time to Hire -->
                  <div
                    class="metric-card bg-white p-6 shadow border border-gray-200"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-sm font-medium text-gray-500">
                          Avg Time to Hire
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="avgTimeToHire"
                        >
                          0 days
                        </p>
                        <div class="flex items-center mt-2">
                          <span
                            class="trend-down text-sm font-medium"
                            id="timeToHireTrend"
                            >-2.1%</span
                          >
                          <span class="text-xs text-gray-500 ml-2"
                            >vs last month</span
                          >
                        </div>
                      </div>
                      <div
                        class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center"
                      >
                        <i data-lucide="clock" class="w-6 h-6 text-white"></i>
                      </div>
                    </div>
                  </div>

                  <!-- Test Completion Rate -->
                  <div
                    class="metric-card bg-white p-6 shadow border border-gray-200"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-sm font-medium text-gray-500">
                          Test Completion
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="testCompletionRate"
                        >
                          0%
                        </p>
                        <div class="flex items-center mt-2">
                          <span
                            class="trend-up text-sm font-medium"
                            id="testCompletionTrend"
                            >+8.5%</span
                          >
                          <span class="text-xs text-gray-500 ml-2"
                            >vs last month</span
                          >
                        </div>
                      </div>
                      <div
                        class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="check-circle"
                          class="w-6 h-6 text-white"
                        ></i>
                      </div>
                    </div>
                  </div>

                  <!-- Cost Per Hire -->
                  <div
                    class="metric-card bg-white p-6 shadow border border-gray-200"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-sm font-medium text-gray-500">
                          Cost Per Hire
                        </p>
                        <p
                          class="text-2xl font-bold text-gray-900"
                          id="costPerHire"
                        >
                          Rp 0
                        </p>
                        <div class="flex items-center mt-2">
                          <span
                            class="trend-neutral text-sm font-medium"
                            id="costPerHireTrend"
                            >-0.5%</span
                          >
                          <span class="text-xs text-gray-500 ml-2"
                            >vs last month</span
                          >
                        </div>
                      </div>
                      <div
                        class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center"
                      >
                        <i
                          data-lucide="dollar-sign"
                          class="w-6 h-6 text-white"
                        ></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Charts Section -->
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Recruitment Funnel -->
                <div class="bg-white shadow border border-gray-200 p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      Recruitment Funnel
                    </h3>
                    <button
                      onclick="toggleChartView('funnel')"
                      class="text-blue-600 hover:text-blue-800 text-sm font-medium"
                    >
                      Change View
                    </button>
                  </div>
                  <div class="chart-container">
                    <canvas id="funnelChart"></canvas>
                  </div>
                </div>

                <!-- DISC Distribution -->
                <div class="bg-white shadow border border-gray-200 p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      DISC Type Distribution
                    </h3>
                    <button
                      onclick="toggleChartView('disc')"
                      class="text-blue-600 hover:text-blue-800 text-sm font-medium"
                    >
                      Show Details
                    </button>
                  </div>
                  <div class="chart-container">
                    <canvas id="discChart"></canvas>
                  </div>
                </div>
              </div>

              <!-- Additional Charts -->
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Time Series - Applications Over Time -->
                <div class="bg-white shadow border border-gray-200 p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      Applications Timeline
                    </h3>
                    <div class="flex items-center space-x-2">
                      <select
                        id="timelineMetric"
                        class="text-sm border border-gray-300 px-2 py-1"
                      >
                        <option value="applications">Applications</option>
                        <option value="interviews">Interviews</option>
                        <option value="hires">Hires</option>
                      </select>
                    </div>
                  </div>
                  <div class="chart-container">
                    <canvas id="timelineChart"></canvas>
                  </div>
                </div>

                <!-- Department Performance -->
                <div class="bg-white shadow border border-gray-200 p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                      Department Performance
                    </h3>
                    <button
                      onclick="viewDepartmentDetails()"
                      class="text-blue-600 hover:text-blue-800 text-sm font-medium"
                    >
                      View Details
                    </button>
                  </div>
                  <div class="chart-container">
                    <canvas id="departmentChart"></canvas>
                  </div>
                </div>
              </div>

              <!-- Insights and Recommendations -->
              <div class="bg-white shadow border border-gray-200 p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">
                  AI-Powered Insights
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="space-y-4">
                    <div
                      class="flex items-start space-x-3 p-4 bg-blue-50 border border-blue-200"
                    >
                      <div
                        class="w-6 h-6 bg-blue-600 flex items-center justify-center mt-0.5"
                      >
                        <i
                          data-lucide="lightbulb"
                          class="w-4 h-4 text-white"
                        ></i>
                      </div>
                      <div>
                        <h4 class="font-semibold text-blue-900">
                          Optimization Opportunity
                        </h4>
                        <p class="text-sm text-blue-800">
                          Your DISC test completion rate has improved by 8.5%.
                          Consider sending reminder emails to increase it
                          further.
                        </p>
                      </div>
                    </div>

                    <div
                      class="flex items-start space-x-3 p-4 bg-green-50 border border-green-200"
                    >
                      <div
                        class="w-6 h-6 bg-green-600 flex items-center justify-center mt-0.5"
                      >
                        <i
                          data-lucide="trending-up"
                          class="w-4 h-4 text-white"
                        ></i>
                      </div>
                      <div>
                        <h4 class="font-semibold text-green-900">
                          Positive Trend
                        </h4>
                        <p class="text-sm text-green-800">
                          Engineering positions show 25% faster hiring time
                          compared to other departments.
                        </p>
                      </div>
                    </div>
                  </div>

                  <div class="space-y-4">
                    <div
                      class="flex items-start space-x-3 p-4 bg-orange-50 border border-orange-200"
                    >
                      <div
                        class="w-6 h-6 bg-orange-600 flex items-center justify-center mt-0.5"
                      >
                        <i
                          data-lucide="alert-triangle"
                          class="w-4 h-4 text-white"
                        ></i>
                      </div>
                      <div>
                        <h4 class="font-semibold text-orange-900">
                          Attention Needed
                        </h4>
                        <p class="text-sm text-orange-800">
                          Marketing positions have lower application rates.
                          Consider improving job descriptions.
                        </p>
                      </div>
                    </div>

                    <div
                      class="flex items-start space-x-3 p-4 bg-purple-50 border border-purple-200"
                    >
                      <div
                        class="w-6 h-6 bg-purple-600 flex items-center justify-center mt-0.5"
                      >
                        <i data-lucide="users" class="w-4 h-4 text-white"></i>
                      </div>
                      <div>
                        <h4 class="font-semibold text-purple-900">
                          DISC Insight
                        </h4>
                        <p class="text-sm text-purple-800">
                          Dominance (D) types show highest job satisfaction
                          scores in leadership positions.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>

    <script>
      const API_BASE = "http://localhost:3011/api";
      // Initialize user from localStorage
      let currentUser = localStorage.getItem("hr_user")
        ? JSON.parse(localStorage.getItem("hr_user"))
        : null;
      let analyticsData = {
        metrics: {
          conversionRate: 23,
          avgTimeToHire: 18,
          testCompletionRate: 78,
          costPerHire: 2500000,
        },
        trends: {
          conversionRate: 5,
          avgTimeToHire: -3,
          testCompletionRate: 8,
          costPerHire: -2,
        },
        funnelData: [
          { stage: "Applications", count: 150 },
          { stage: "Screening", count: 89 },
          { stage: "Interviews", count: 34 },
          { stage: "Offers", count: 8 },
          { stage: "Hired", count: 5 },
        ],
        discDistribution: [
          { type: "Dominance", percentage: 28, count: 21 },
          { type: "Influence", percentage: 32, count: 24 },
          { type: "Steadiness", percentage: 22, count: 17 },
          { type: "Compliance", percentage: 18, count: 14 },
        ],
        timeline: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
          applications: [45, 52, 48, 65, 78, 92],
          interviews: [15, 18, 14, 22, 28, 34],
          hires: [2, 3, 2, 4, 5, 6],
        },
        departmentPerformance: [
          { department: "Engineering", applications: 45, hires: 8 },
          { department: "Marketing", applications: 32, hires: 5 },
          { department: "Sales", applications: 28, hires: 4 },
          { department: "HR", applications: 20, hires: 3 },
          { department: "Finance", applications: 25, hires: 4 },
        ],
      };
      let charts = {};

      // Initialize Lucide icons
      lucide.createIcons();

      // Sidebar Navigation Functions
      function toggleMobileSidebar() {
        const sidebar = document.getElementById("mobileSidebar");
        sidebar.classList.toggle("hidden");
      }

      function toggleUserMenu() {
        const userMenu = document.getElementById("userMenu");
        userMenu.classList.toggle("hidden");
      }

      // Close user menu when clicking outside
      document.addEventListener("click", function (event) {
        const userMenu = document.getElementById("userMenu");
        const userButton = event.target.closest('[onclick="toggleUserMenu()"]');

        if (!userButton && !userMenu.contains(event.target)) {
          userMenu.classList.add("hidden");
        }
      });

      // Load analytics data - menggunakan dummy data lokal (tanpa backend)
      async function loadAnalyticsData() {
        try {
          console.log("✅ Loading analytics data (dummy - tanpa backend)...");

          // Simulasi delay loading
          await new Promise((resolve) => setTimeout(resolve, 300));

          // Gunakan dummy data lokal
          console.log("✅ Analytics data loaded dengan dummy charts & metrics");

          // Update UI dengan data
          updateMetrics();
          initializeCharts();
        } catch (error) {
          console.error("Error loading analytics data:", error);
          showErrorState();
        }
      }

      // Update key metrics
      function updateMetrics() {
        const metrics = analyticsData?.metrics || {};
        const trends = analyticsData?.trends || {};

        document.getElementById("conversionRate").textContent = `${
          metrics.conversionRate || 0
        }%`;
        document.getElementById("avgTimeToHire").textContent = `${
          metrics.avgTimeToHire || 0
        } days`;
        document.getElementById("testCompletionRate").textContent = `${
          metrics.testCompletionRate || 0
        }%`;
        document.getElementById("costPerHire").textContent = `Rp ${(
          metrics.costPerHire || 0
        ).toLocaleString("id-ID")}`;

        // Update trend indicators
        updateTrendIndicator("conversionTrend", trends.conversionRate || 0);
        updateTrendIndicator("timeToHireTrend", trends.avgTimeToHire || 0);
        updateTrendIndicator(
          "testCompletionTrend",
          trends.testCompletionRate || 0
        );
        updateTrendIndicator("costPerHireTrend", trends.costPerHire || 0);
      }

      function updateTrendIndicator(elementId, value) {
        const element = document.getElementById(elementId);
        const formattedValue = value > 0 ? `+${value}%` : `${value}%`;
        element.textContent = formattedValue;

        // Update trend class
        element.className =
          value > 0
            ? "trend-up text-sm font-medium"
            : value < 0
            ? "trend-down text-sm font-medium"
            : "trend-neutral text-sm font-medium";
      }

      // Initialize all charts
      function initializeCharts() {
        initializeFunnelChart();
        initializeDISCChart();
        initializeTimelineChart();
        initializeDepartmentChart();
      }

      // Initialize Funnel Chart
      function initializeFunnelChart() {
        const ctx = document.getElementById("funnelChart").getContext("2d");
        charts.funnel = new Chart(ctx, {
          type: "bar",
          data: {
            labels: (analyticsData.funnelData || []).map((item) => item.stage),
            datasets: [
              {
                label: "Candidates",
                data: (analyticsData.funnelData || []).map(
                  (item) => item.count
                ),
                backgroundColor: [
                  "#3b82f6",
                  "#1e40af",
                  "#1e3a8a",
                  "#1e293b",
                  "#0f172a",
                ],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }

      // Initialize DISC Chart
      function initializeDISCChart() {
        const ctx = document.getElementById("discChart").getContext("2d");
        charts.disc = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: (analyticsData.discDistribution || []).map(
              (item) => `${item.type} (${item.percentage}%)`
            ),
            datasets: [
              {
                data: (analyticsData.discDistribution || []).map(
                  (item) => item.count
                ),
                backgroundColor: ["#dc2626", "#ea580c", "#16a34a", "#2563eb"],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
              },
            },
          },
        });
      }

      // Initialize Timeline Chart
      function initializeTimelineChart() {
        const ctx = document.getElementById("timelineChart").getContext("2d");
        charts.timeline = new Chart(ctx, {
          type: "line",
          data: {
            labels: (analyticsData.timeline || {}).labels || [],
            datasets: [
              {
                label: "Applications",
                data: (analyticsData.timeline || {}).applications || [],
                borderColor: "#3b82f6",
                backgroundColor: "#3b82f6",
                tension: 0.4,
                fill: false,
              },
              {
                label: "Interviews",
                data: (analyticsData.timeline || {}).interviews || [],
                borderColor: "#16a34a",
                backgroundColor: "#16a34a",
                tension: 0.4,
                fill: false,
              },
              {
                label: "Hires",
                data: (analyticsData.timeline || {}).hires || [],
                borderColor: "#dc2626",
                backgroundColor: "#dc2626",
                tension: 0.4,
                fill: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
              },
            },
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }

      // Initialize Department Chart
      function initializeDepartmentChart() {
        const ctx = document.getElementById("departmentChart").getContext("2d");
        charts.department = new Chart(ctx, {
          type: "bar",
          data: {
            labels: (analyticsData.departmentPerformance || []).map(
              (item) => item.department
            ),
            datasets: [
              {
                label: "Applications",
                data: (analyticsData.departmentPerformance || []).map(
                  (item) => item.applications
                ),
                backgroundColor: "#3b82f6",
                borderWidth: 0,
              },
              {
                label: "Hires",
                data: (analyticsData.departmentPerformance || []).map(
                  (item) => item.hires
                ),
                backgroundColor: "#16a34a",
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
              },
            },
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }

      // Show error state
      function showErrorState() {
        console.error("Failed to load analytics data");
        // Could show error message in charts or fallback UI
      }

      // Action functions
      function refreshAnalytics() {
        console.log("Refreshing analytics data...");
        loadAnalyticsData();
      }

      function exportAnalyticsReport() {
        alert(
          "Export Analytics Report functionality would be implemented here"
        );
      }

      function toggleChartView(chartType) {
        alert(
          `Toggle ${chartType} chart view functionality would be implemented here`
        );
      }

      function viewDepartmentDetails() {
        alert(
          "View Department Details functionality would be implemented here"
        );
      }

      // Date range change handler
      document.addEventListener("DOMContentLoaded", function () {
        const dateRangeSelect = document.getElementById("dateRange");
        if (dateRangeSelect) {
          dateRangeSelect.addEventListener("change", function () {
            console.log("Date range changed:", this.value);
            // Reload analytics data for new date range
            loadAnalyticsData();
          });
        }
      });

      // Login success handler
      function loginSuccess(userData) {
        currentUser = userData;
        // Save user data to localStorage
        localStorage.setItem("hr_user", JSON.stringify(userData));

        // Update user info in header and sidebar
        updateUserUI(userData);

        // Hide login, show main app
        document.getElementById("loginModal").classList.add("hidden");
        document.getElementById("mainApp").classList.remove("hidden");

        // Load analytics data
        loadAnalyticsData();
      }

      // Update user UI elements
      function updateUserUI(userData) {
        if (document.getElementById("headerUserEmail")) {
          document.getElementById("headerUserEmail").textContent =
            userData.email;
        }
        if (document.getElementById("headerUserName")) {
          document.getElementById("headerUserName").textContent = userData.name;
        }
        if (document.getElementById("headerUserInitial")) {
          document.getElementById("headerUserInitial").textContent =
            userData.name.charAt(0);
        }
        if (document.getElementById("sidebarUserEmail")) {
          document.getElementById("sidebarUserEmail").textContent =
            userData.email;
        }
        if (document.getElementById("sidebarUserName")) {
          document.getElementById("sidebarUserName").textContent =
            userData.name;
        }
        if (document.getElementById("sidebarUserInitial")) {
          document.getElementById("sidebarUserInitial").textContent =
            userData.name.charAt(0);
        }
      }

      // Check authentication state on page load
      function checkAuthState() {
        if (currentUser) {
          // User is already logged in
          document.getElementById("loginModal").classList.add("hidden");
          document.getElementById("mainApp").classList.remove("hidden");
          // Update UI with user info
          updateUserUI(currentUser);
          // Load analytics data
          loadAnalyticsData();
        } else {
          // Show login modal
          document.getElementById("loginModal").classList.remove("hidden");
          document.getElementById("mainApp").classList.add("hidden");
        }
      }

      // Login functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Check if user is already logged in
        checkAuthState();

        // Set up login form
        document
          .getElementById("loginForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            // Demo login validation
            if (email === "hr@company.com" && password === "password123") {
              const userData = {
                email: email,
                name: "HR Manager",
                role: "hr_manager",
              };

              loginSuccess(userData);
            } else {
              alert(
                "Email atau password salah. Gunakan: hr@company.com / password123"
              );
            }
          });
      });

      // Logout functionality
      function logout() {
        currentUser = null;
        // Clear localStorage
        localStorage.removeItem("hr_user");
        document.getElementById("loginModal").classList.remove("hidden");
        document.getElementById("mainApp").classList.add("hidden");
      }
    </script>
  </body>
</html>
